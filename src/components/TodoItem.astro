---
import type { Todo } from '../lib/todo';

export interface Props {
  todo: Todo | null;
}
const { todo } = Astro.props;

if (!todo) {
  return null;
}
---

<li
  class="todo-item flex items-center justify-between rounded-lg border border-gray-200 bg-white p-4 shadow-sm transition-shadow duration-200 hover:shadow-md"
  id={`todo-${todo.id}`}
>
  <div class="flex items-center gap-3">
    <span class={`text-gray-800 ${todo.completed ? 'line-through text-gray-500' : ''}`}>
      {todo.text}
    </span>
    {
      todo.completed && (
        <span class="rounded-full bg-green-100 px-2 py-1 text-xs font-semibold text-green-700">
          Completed
        </span>
      )
    }
  </div>
  <button
    class="delete-button rounded-lg bg-red-500 px-4 py-2 text-sm font-medium text-white transition-colors duration-200 hover:bg-red-600 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2"
    hx-delete={`/api/todos/${todo.id}`}
    hx-target="closest .todo-item"
    hx-swap="outerHTML"
  >
    Delete
  </button>
</li>
