---
import { addTodo } from '../../../lib/todo';
import TodoItem from '../../../components/TodoItem.astro';
import type { Todo } from '../../../lib/todo';

let newTodo: Todo | null = null;
if (Astro.request.method === 'POST') {
  const formData = await Astro.request.formData();
  const text = formData.get('text');
  if (typeof text === 'string') {
    newTodo = await addTodo(text);
  }
}
export const prerender = false;
---
<TodoItem todo={newTodo}/>